<!DOCTYPE html><html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /><title>1.3 å½“æˆ‘ä»¬èŠåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œæˆ‘ä»¬åœ¨èŠä»€ä¹ˆ &mdash; dolphin</title><link rel="stylesheet" href="http://localhost:4000/assets/vendor/primer-css/css/primer.css"><link rel="stylesheet" href="http://localhost:4000/assets/css/components/collection.css"><link rel="stylesheet" href="http://localhost:4000/assets/css/components/repo-card.css"><link rel="stylesheet" href="http://localhost:4000/assets/css/sections/repo-list.css"><link rel="stylesheet" href="http://localhost:4000/assets/css/components/boxed-group.css"><link rel="stylesheet" href="http://localhost:4000/assets/css/globals/common.css"><link rel="stylesheet" href="http://localhost:4000/assets/css/globals/responsive.css"><link rel="stylesheet" href="http://localhost:4000/assets/css/posts/index.css"><link rel="stylesheet" href="http://localhost:4000/assets/vendor/octicons/octicons/octicons.css"><link rel="stylesheet" href="https://mazhuang.org/rouge-themes/dist/github.css"><link rel="stylesheet" href="http://localhost:4000/assets/vendor/share.js/dist/css/share.min.css"><link rel="canonical" href="http://localhost:4000/2021/06/19/1.3-Talk-About-Distribute-Transaction/"><link rel="alternate" type="application/atom+xml" title="dolphin" href="http://localhost:4000/feed.xml"><link rel="shortcut icon" href="http://localhost:4000/favicon.png"><meta property="og:title" content="1.3 å½“æˆ‘ä»¬èŠåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œæˆ‘ä»¬åœ¨èŠä»€ä¹ˆ"><meta name="keywords" content="åˆ†å¸ƒå¼, 2PC, äº‹åŠ¡, TCC"><meta name="og:keywords" content="åˆ†å¸ƒå¼, 2PC, äº‹åŠ¡, TCC"><meta name="description" content="å‰è¨€ï¼šä½ æ˜¯å¦çœŸçš„æ˜ç™½åˆ†å¸ƒå¼äº‹åŠ¡ï¼Ÿ"><meta name="og:description" content="å‰è¨€ï¼šä½ æ˜¯å¦çœŸçš„æ˜ç™½åˆ†å¸ƒå¼äº‹åŠ¡ï¼Ÿ"><meta property="og:url" content="http://localhost:4000/2021/06/19/1.3-Talk-About-Distribute-Transaction/"><meta property="og:site_name" content="dolphin"><meta property="og:type" content="article"><meta property="og:locale" content="zh_CN" /><meta property="article:published_time" content="2021-06-19"><title>1.3 å½“æˆ‘ä»¬èŠåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œæˆ‘ä»¬åœ¨èŠä»€ä¹ˆ | dolphin</title><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="1.3 å½“æˆ‘ä»¬èŠåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œæˆ‘ä»¬åœ¨èŠä»€ä¹ˆ" /><meta name="author" content="DempeZheng" /><meta property="og:locale" content="en_US" /><meta name="description" content="åˆ†å¸ƒå¼äº‹åŠ¡" /><meta property="og:description" content="åˆ†å¸ƒå¼äº‹åŠ¡" /><link rel="canonical" href="http://localhost:4000/2021/06/19/1.3-Talk-About-Distribute-Transaction/" /><meta property="og:url" content="http://localhost:4000/2021/06/19/1.3-Talk-About-Distribute-Transaction/" /><meta property="og:site_name" content="dolphin" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-06-19T00:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="1.3 å½“æˆ‘ä»¬èŠåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œæˆ‘ä»¬åœ¨èŠä»€ä¹ˆ" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"DempeZheng"},"dateModified":"2021-06-19T00:00:00+08:00","datePublished":"2021-06-19T00:00:00+08:00","description":"åˆ†å¸ƒå¼äº‹åŠ¡","headline":"1.3 å½“æˆ‘ä»¬èŠåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œæˆ‘ä»¬åœ¨èŠä»€ä¹ˆ","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2021/06/19/1.3-Talk-About-Distribute-Transaction/"},"url":"http://localhost:4000/2021/06/19/1.3-Talk-About-Distribute-Transaction/"}</script> <script src="http://localhost:4000/assets/vendor/jquery/dist/jquery.min.js"></script> <script src="http://localhost:4000/assets/js/jquery-ui.js"></script> <script src="http://localhost:4000/assets/js/main.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-RWCQYNELFN"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-RWCQYNELFN'); </script></head><body class="" data-mz=""><header class="site-header"><div class="container"><h1> <a href="http://localhost:4000/" title="dolphin"> <span class="octicon octicon-mark-github"></span> dolphin </a></h1><button class="collapsed mobile-visible" type="button" onclick="toggleMenu();"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button><nav class="site-header-nav" role="navigation"> <a href="http://localhost:4000/" class="site-header-nav-item" target="_self" title="ğŸ“°é¦–é¡µ"> <i class="octicon octicon-home"></i> ğŸ“°é¦–é¡µ </a> <a href="http://localhost:4000/categories/" class="site-header-nav-item" target="_self" title="åˆ†ç±»"> <i class="octicon octicon-book"></i> åˆ†ç±» </a> <a href="http://localhost:4000/wiki/" class="site-header-nav-item" target="_self" title="ç»´åŸº"> <i class=""></i> ç»´åŸº </a> <a href="http://localhost:4000/links/" class="site-header-nav-item" target="_self" title="é“¾æ¥"> <i class="octicon octicon-mail"></i> é“¾æ¥ </a> <a href="http://localhost:4000/about/" class="site-header-nav-item" target="_self" title="å…³äº"> <i class="octicon octicon-person"></i> å…³äº </a> <a class="mobile-hidden" href="http://localhost:4000/feed.xml" title="è®¢é˜… RSS"> <i class="octicon octicon-rss" style="color:orange;"></i> </a></nav></div></header><section class="collection-head small " data-pattern-id="55"><div class="container"><div class="columns"><div class="column three-fourths"><div class="collection-title"><h1 class="collection-header">1.3 å½“æˆ‘ä»¬èŠåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œæˆ‘ä»¬åœ¨èŠä»€ä¹ˆ</h1><div class="collection-info"> <span class="meta-info"> <span class="octicon octicon-calendar"></span> 2021/06/19 </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="http://localhost:4000/categories/#æŠ€æœ¯" title="æŠ€æœ¯">æŠ€æœ¯</a> </span> <span class="meta-info"> <span class="octicon octicon-clock"></span> å…± 3841 å­—ï¼Œçº¦ 11 åˆ†é’Ÿ </span></div></div></div><div class="column one-fourth mobile-hidden"><div class="collection-title"></div></div></div></div></section><section class="container content"><div class="columns"><div class="column three-fourths" ><article class="article-content markdown-body"><h2 id="å‰è¨€ä½ æ˜¯å¦çœŸçš„æ˜ç™½åˆ†å¸ƒå¼äº‹åŠ¡">å‰è¨€ï¼šä½ æ˜¯å¦çœŸçš„æ˜ç™½åˆ†å¸ƒå¼äº‹åŠ¡ï¼Ÿ</h2><ol><li>äº‹åŠ¡çš„ACIDä¸­çš„Cä¸€è‡´æ€§å’Œåˆ†å¸ƒå¼CAPç†è®ºä¸­Cåˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</li><li>åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œäº‹åŠ¡çš„ACIDä¸­çš„åŸå­æ€§é€šå¸¸æ€ä¹ˆå®ç°çš„ï¼Ÿéš”ç¦»æ€§å‘¢ï¼Ÿ</li><li>åˆ†å¸ƒå¼äº‹åŠ¡æ˜¯ä¸€ä¸ªçº¯æŠ€æœ¯é—®é¢˜ï¼Œä¸ºä»€ä¹ˆå¾ˆå¤šåˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆä¼šä¾µå…¥ä¸šåŠ¡ï¼Ÿ</li></ol><h2 id="ä»äº‹åŠ¡acidè¯´èµ·">ä»äº‹åŠ¡ACIDè¯´èµ·</h2><ul><li>Transaction Atomicityï¼šall-or-nothing<ul><li>undo log</li></ul></li><li>Isolation<ul><li>2PL</li><li>Timestamp Orderingï¼ˆT/Oï¼‰<ul><li>Base T/O</li><li>Optimistic Currency Control(OCC)</li><li>Multi-Version Concurrency Control(MVCC)</li></ul></li></ul></li><li>Durability<ul><li>Redo log</li></ul></li><li>Consistency</li></ul><h3 id="æ€è€ƒæ€ä¹ˆç†è§£acidä¸­çš„ä¸€è‡´æ€§">æ€è€ƒï¼šæ€ä¹ˆç†è§£ACIDä¸­çš„ä¸€è‡´æ€§ï¼Ÿ</h3><blockquote><p>åŸå­æ€§ï¼Œéš”ç¦»æ€§å’ŒæŒä¹…æ€§æ˜¯æ•°æ®åº“çš„å±æ€§ï¼Œè€Œä¸€è‡´æ€§ï¼ˆåœ¨ACIDæ„ä¹‰ä¸Šï¼‰æ˜¯åº”ç”¨ç¨‹åºçš„å±æ€§ã€‚åº”ç”¨å¯èƒ½ä¾èµ–æ•°æ®åº“çš„åŸå­æ€§å’Œéš”ç¦»å±æ€§æ¥å®ç°ä¸€è‡´æ€§ï¼Œä½†è¿™å¹¶ä¸ä»…å–å†³äºæ•°æ®åº“ã€‚</p></blockquote><blockquote><p><a href="https://link.zhihu.com/?target=https%3A//en.wikipedia.org/wiki/Consistency_(database_systems)">Consistency</a> ensures that a transaction can <strong>only bring the database from one valid state to another</strong>, maintaining database <a href="https://link.zhihu.com/?target=https%3A//en.wikipedia.org/wiki/Invariant_(computer_science)">invariants</a>: <strong>any data written to the database must be valid according to all defined rules, including <a href="https://link.zhihu.com/?target=https%3A//en.wikipedia.org/wiki/Integrity_constraints">constraints</a>, <a href="https://link.zhihu.com/?target=https%3A//en.wikipedia.org/wiki/Cascading_rollback">cascades</a>,<a href="https://link.zhihu.com/?target=https%3A//en.wikipedia.org/wiki/Database_trigger">triggers</a>, and any combination thereof.</strong> This prevents database corruption by an illegal transaction, but does <strong>not guarantee that a transaction is \correct.</strong>(From wikipedia)</p></blockquote><h2 id="capåˆ†å¸ƒå¼ç†è®º">CAPåˆ†å¸ƒå¼ç†è®º</h2><ul><li>Consistencyï¼ˆLinearizability Consistencyï¼‰<ul><li><a href="https://en.wikipedia.org/wiki/Linearizability">çº¿æ€§ä¸€è‡´æ€§ ï¼ˆLinearizabilityï¼šStrong consistency or Atomic consistency)</a></li><li><a href="https://en.wikipedia.org/wiki/Sequential_consistency">é¡ºåºä¸€è‡´æ€§ï¼ˆSequential consistencyï¼‰</a></li><li><a href="https://en.wikipedia.org/wiki/Causal_consistency">å› æœä¸€è‡´æ€§ï¼ˆCausal consistencyï¼‰</a></li><li><a href="https://en.wikipedia.org/wiki/Eventual_consistency">æœ€ç»ˆä¸€è‡´æ€§ï¼ˆEventual consistencyï¼‰</a></li></ul></li><li>Availabilityï¼ˆ100% Availabilityï¼‰</li><li>Partition</li></ul><h3 id="æ€è€ƒcapä¸­çš„cå’Œacidä¸­çš„cæ˜¯ç›¸åŒçš„å—">æ€è€ƒï¼šCAPä¸­çš„Cå’ŒACIDä¸­çš„Cæ˜¯ç›¸åŒçš„å—ï¼Ÿ</h3><blockquote><p>Both Câ€™s stand for consistency, but the notion of consistency in CAP means that â€œall nodes see the same data at the same timeâ€ and the notion of consistency in ACID means that â€œany transaction the database performs will take it from one consistent state to anotherâ€. (From Wikipedia.)</p></blockquote><ul><li>ACID C:ï¼ˆmulti-object<code class="language-plaintext highlighter-rouge">ã€</code>multi-operationï¼‰</li><li>CAP C: ï¼ˆsingle-object<code class="language-plaintext highlighter-rouge">ã€</code>single-operationï¼‰å¤šä¸ªå‰¯æœ¬çš„ä¸€è‡´æ€§</li></ul><h2 id="åˆ†å¸ƒå¼ç¯å¢ƒç»™äº‹åŠ¡å¸¦æ¥å“ªäº›æŒ‘æˆ˜">åˆ†å¸ƒå¼ç¯å¢ƒç»™äº‹åŠ¡å¸¦æ¥å“ªäº›æŒ‘æˆ˜ï¼Ÿ</h2><h3 id="åˆ†å¸ƒå¼ç¯å¢ƒä¸‹åŸå­æ€§æ€ä¹ˆä¿è¯">åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼ŒåŸå­æ€§æ€ä¹ˆä¿è¯ï¼Ÿ</h3><h3 id="2pcåŸå­åè®®">2PCåŸå­åè®®</h3><p><img src="http://localhost:4000/images/v2-d40abfa365ed84e84e264ba13900f64b_720w.jpg" alt="img" /></p><p>å»¶ä¼¸ï¼š<a href="https://zhuanlan.zhihu.com/p/35298019">æ¼«è¯åˆ†å¸ƒå¼ç³»ç»Ÿå…±è¯†åè®®: 2PC/3PCç¯‡</a></p><p>####</p><h4 id="2pc3pc">2PCâ†’3PC</h4><ul><li>2PCå­˜åœ¨ä»€ä¹ˆé—®é¢˜</li><li>3PCè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œå­˜åœ¨ä»€ä¹ˆé—®é¢˜ï¼ˆä¸ºä»€ä¹ˆå¾ˆå°‘å·¥ç¨‹åŒ–çš„å®è·µï¼‰</li></ul><h4 id="2pc-vs-paxos">2PC VS Paxos</h4><blockquote><p>2PC blocks if the transaction manager fails, requiring human intervention to restart. 3PC algorithms (there are several such algorithms) try to fix 2PC by electing a new transaction manager when the original manager fails.</p></blockquote><blockquote><p>Paxos does not block as long as a majority of processes (managers) are correct. Paxos actually solves the more general problem of consensus, hence, it can be used to implement transaction commit as well. In comparison to 2PC it requires more messages, but it is resilient to manager failures. In comparison to most 3PC algorithms, Paxos renders a simpler, more efficient algorithm (minimal message delay), and has been proved to be correct.</p></blockquote><blockquote><p>Gray and Lamport compare 2PC and Paxos in an excellent <a href="http://research.microsoft.com/pubs/64636/tr-2003-96.pdf">paper</a> titled â€œ<a href="https://lamport.azurewebsites.net/video/consensus-on-transaction-commit.pdf">consensus on transaction commit</a>â€.</p></blockquote><h3 id="isolation--consistency">Isolation &amp; Consistency</h3><p>åˆ†å¸ƒå¼é¢†åŸŸï¼Œäº‹åŠ¡åˆ†æˆäº†ä¸¤ä¸ªå­é—®é¢˜ï¼Œä¸€ä¸ªæ˜¯éš”ç¦»æ€§ï¼ˆisolationï¼‰ï¼Œä¸€ä¸ªæ˜¯ä¸€è‡´æ€§ï¼ˆconsistencyï¼‰</p><p><img src="http://localhost:4000/images/jepsen.png" alt="image.png" /></p><h2 id="xopen-xa">X/Open XA</h2><p>XA è§„èŒƒ æ˜¯ X/Open ç»„ç»‡å®šä¹‰çš„åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†ï¼ˆDTPï¼ŒDistributed Transaction Processingï¼‰æ ‡å‡†ã€‚</p><p>XA è§„èŒƒ æè¿°äº†å…¨å±€çš„äº‹åŠ¡ç®¡ç†å™¨ä¸å±€éƒ¨çš„èµ„æºç®¡ç†å™¨ä¹‹é—´çš„æ¥å£ã€‚ XAè§„èŒƒ çš„ç›®çš„æ˜¯å…è®¸çš„å¤šä¸ªèµ„æºï¼ˆå¦‚æ•°æ®åº“ï¼Œåº”ç”¨æœåŠ¡å™¨ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ç­‰ï¼‰åœ¨åŒä¸€äº‹åŠ¡ä¸­è®¿é—®ï¼Œè¿™æ ·å¯ä»¥ä½¿ ACID å±æ€§è·¨è¶Šåº”ç”¨ç¨‹åºè€Œä¿æŒæœ‰æ•ˆã€‚</p><p>XA è§„èŒƒ ä½¿ç”¨ä¸¤é˜¶æ®µæäº¤ï¼ˆ2PCï¼ŒTwo-Phase Commitï¼‰æ¥ä¿è¯æ‰€æœ‰èµ„æºåŒæ—¶æäº¤æˆ–å›æ»šä»»ä½•ç‰¹å®šçš„äº‹åŠ¡ã€‚</p><h3 id="æ€è€ƒxaå­˜åœ¨ä»€ä¹ˆé—®é¢˜">æ€è€ƒï¼šXAå­˜åœ¨ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h3><ul><li>æç¤ºï¼š2PCå­˜åœ¨ä»€ä¹ˆé—®é¢˜ï¼Ÿ</li><li>é”å®šå¼•å…¥ä»€ä¹ˆé—®é¢˜ï¼Ÿ</li></ul><h2 id="æŸ”æ€§äº‹åŠ¡">æŸ”æ€§äº‹åŠ¡</h2><ul><li>BASEç†è®º</li><li>éACID</li></ul><h3 id="æ€è€ƒåˆ†å¸ƒå¼äº‹åŠ¡åœºæ™¯acid--cap-æ€ä¹ˆé€‰">æ€è€ƒï¼šåˆ†å¸ƒå¼äº‹åŠ¡åœºæ™¯ï¼ŒACID &amp; CAP æ€ä¹ˆé€‰ï¼Ÿ</h3><ul><li><p>ACID ï¼šTransaction Atomicityï¼š âœ…</p></li><li><p>ACID ï¼šDurabilityï¼š âœ…</p></li><li><p>ACID ï¼š Database Consistencyï¼š âœ…</p></li><li><p>ACID ï¼š <strong>Isolation</strong> ï¼šRUã€RCã€Cursor Stabilityã€RRã€Snapshot Isolationã€Serializable ï¼Ÿ</p></li><li><p>CAP ï¼š Consistency ï¼šLinearizabilityã€Sequentialã€Causalã€PRAMâ€¦?</p></li><li><p>CAPï¼š Availability : 0~100% ?</p></li></ul><h3 id="æ€è€ƒåˆ†å¸ƒå¼äº‹åŠ¡åœºæ™¯acid--cap-æ€ä¹ˆé€‰éš”ç¦»æ€§-vs-æ€§èƒ½">æ€è€ƒï¼šåˆ†å¸ƒå¼äº‹åŠ¡åœºæ™¯ï¼ŒACID &amp; CAP æ€ä¹ˆé€‰ï¼Ÿéš”ç¦»æ€§ VS æ€§èƒ½</h3><blockquote><p>ç‰ºç‰²éš”ç¦»æ€§ï¼Œæ¢å–æ€§èƒ½</p></blockquote><h2 id="åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆåº”ç”¨å±‚">åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼ˆåº”ç”¨å±‚ï¼‰</h2><h3 id="tcc">TCC</h3><p><a href="https://github.com/ningyu1/e-books/blob/master/doc/%E5%A4%A7%E8%A7%84%E6%A8%A1SOA%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86_%E7%A8%8B%E7%AB%8B_SD2C2008.pdf">å¤§è§„æ¨¡SOAç³»ç»Ÿä¸­çš„åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†-ç¨‹ç«‹-æ”¯ä»˜å®</a></p><h3 id="äº‹åŠ¡æ¶ˆæ¯">äº‹åŠ¡æ¶ˆæ¯</h3><p><a href="https://help.aliyun.com/document_detail/43348.html">RocketMQäº‹åŠ¡æ¶ˆæ¯</a></p><p>ã€æ³¨ã€‘Pulsarã€Kafkaæ¶ˆæ¯ä¸­é—´ä»¶çš„äº‹åŠ¡æ”¯æŒè·ŸRocketMQçš„äº‹åŠ¡æ¶ˆæ¯æœ‰æ‰€ä¸åŒ</p><h3 id="å¯é æ¶ˆæ¯">å¯é æ¶ˆæ¯</h3><p>æ€è€ƒï¼šå¯é æ¶ˆæ¯æ–¹æ¡ˆçš„åŸå­æ€§æ€ä¹ˆä¿è¯ï¼Ÿ</p><p><a href="https://www.infoq.cn/article/b4vpvp3m8da-pm7zqmgz">å»å“ªå„¿ç½‘æ¶ˆæ¯é˜Ÿåˆ—è®¾è®¡ä¸å®ç°</a></p><h3 id="saga">Saga</h3><p><img src="http://localhost:4000/images/From_2PC_To_Saga.png" alt="img" /></p><p><a href="http://seata.io/zh-cn/docs/user/saga.html">SEATA Sagaæ¨¡å¼</a>ã€<a href="https://microservices.io/patterns/data/saga.html">Pattern Saga</a></p><h4 id="å…³äºsaga">å…³äºSaga</h4><ul><li><code class="language-plaintext highlighter-rouge">Saga</code>åŒºåˆ«XAï¼Œæ˜¯åŸºäºæœåŠ¡ç»Ÿä¸€æ’ç¨‹ï¼Œè€Œéèµ„æºç®¡ç†å™¨ï¼ŒåŒTCCï¼›</li><li>SagaåŒºåˆ«TCCï¼Œæ²¡æœ‰tryæ­¥éª¤ï¼Œæ€§èƒ½ä¼˜äºTCC</li><li>Sagaé€‚ç”¨é•¿äº‹åŠ¡ï¼ˆ<em>Long</em>-running-transactionï¼‰ï¼ŒTCCé€‚ç”¨çŸ­äº‹åŠ¡</li><li>Sagaæœ€å¤§çš„é—®é¢˜æ˜¯éš”ç¦»æ€§å¸¦æ¥çš„é—®é¢˜</li></ul><h4 id="saga-vs-å¯é æ¶ˆæ¯">Saga VS å¯é æ¶ˆæ¯</h4><ul><li>å¯é æ¶ˆæ¯ä¸‹æ¸¸ä¸šåŠ¡ä¸éœ€è¦Cancel</li><li>å¯é æ¶ˆæ¯åƒæ˜¯Sagaçš„ç‰¹ä¾‹</li></ul><h3 id="å…¶ä»–">å…¶ä»–</h3><ul><li>å¹‚ç­‰æ“ä½œ+å¯å›æŸ¥ï¼ˆå«ä»€ä¹ˆä¸é‡è¦ï¼‰</li></ul><h3 id="æ¢è®¨xa-ä¸å¸¸è§çš„åˆ†å¸ƒå¼æ–¹æ¡ˆæœ‰ä»€ä¹ˆä¸åŒ">æ¢è®¨ï¼šXA ä¸å¸¸è§çš„åˆ†å¸ƒå¼æ–¹æ¡ˆæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</h3><p><a href="https://mp.weixin.qq.com/s/uYF7bE9Ob-0hfFVNO7Pcpw">åˆ†å¸ƒå¼äº‹åŠ¡å¦‚ä½•å®ç°ï¼Ÿæ·±å…¥è§£è¯» Seata çš„ XA æ¨¡å¼</a></p><h2 id="èŠä¸€èŠseataåˆ†å¸ƒå¼äº‹åŠ¡æ ‡å‡†åŒ–å¹³å°">èŠä¸€èŠï¼šSeataï¼šåˆ†å¸ƒå¼äº‹åŠ¡æ ‡å‡†åŒ–å¹³å°</h2><p>æ€è€ƒï¼š</p><ul><li>è®¨è®ºä¸€ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶ï¼Œæˆ‘ä»¬é¦–å…ˆè®¨è®ºä»€ä¹ˆï¼Ÿ</li><li>æ€§èƒ½ã€ä¸šåŠ¡ä¾µå…¥ã€éš”ç¦»æ€§ï¼Ÿ</li></ul><h2 id="å»¶ä¼¸åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡ä¸­capacidå¯ä»¥å¦‚ä½•å–èˆ">å»¶ä¼¸ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡ä¸­CAPã€ACIDå¯ä»¥å¦‚ä½•å–èˆ</h2><ol><li>åœ¨æ»¡è¶³ä¼ ç»Ÿæ•°æ®åº“çš„å¼ºä¸€è‡´æ€§çº¦æŸä¸‹ï¼Œæˆ‘ä»¬èƒ½åšåˆ°å¤šé«˜çš„å¯ç”¨æ€§ï¼Œä»¥åŠå¤šä½çš„å»¶è¿Ÿï¼Ÿ</li><li>åœ¨æ»¡è¶³ 100% Read Write Availability çš„çº¦æŸä¸‹ï¼Œæˆ‘ä»¬èƒ½åšåˆ°å¤šé«˜çš„ä¸€è‡´æ€§ï¼Ÿ</li><li>åœ¨è¿™ä¸¤è€…ä¹‹é—´è¿˜å­˜åœ¨ä»€ä¹ˆï¼Ÿ</li></ol><p>å¼ºçƒˆæ¨èï¼š<a href="http://hcoona.github.io/Tips/CAP-ACID-what-can-we-do/">CAPï¼ŒACIDï¼Œæˆ‘ä»¬èƒ½åšä»€ä¹ˆ</a></p><h2 id="å°ç»“">å°ç»“</h2><p>åˆ†å¸ƒå¼äº‹åŠ¡æ²¡æœ‰é“¶å¼¹ï¼åˆ†å¸ƒå¼äº‹åŠ¡ä¸šåŠ¡å±‚çš„è§£å†³æ–¹æ¡ˆæœ¬è´¨æ˜¯åœ¨<strong>æ€§èƒ½</strong>ã€<strong>éš”ç¦»æ€§</strong>ã€<strong>ä¸šåŠ¡ä¾µå…¥æ€§</strong>ç­‰åšå–èˆã€‚äº’è”ç½‘ä¸šåŠ¡åœºæ™¯å¸¸å¸¸ä¸ºäº†é«˜æ€§èƒ½è€Œé€‰æ‹©ç‰ºç‰²éš”ç¦»æ€§ï¼Œé€šè¿‡å…·ä½“çš„ä¸šåŠ¡åœºæ™¯æˆ–è€…ç‰¹å®šçš„æ¶æ„è®¾è®¡å»è§„é¿éš”ç¦»æ€§ç¼ºå¤±å¼•å…¥çš„ä¸šåŠ¡é—®é¢˜ã€‚æ‰€ä»¥ï¼Œå¾ˆå¤šæˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆå‡ ä¹éƒ½æ˜¯é™å®šä¸šåŠ¡åœºæ™¯çš„ã€‚åˆ†å¸ƒå¼äº‹åŠ¡æ²¡æœ‰é“¶å¼¹ï¼åˆ†å¸ƒå¼äº‹åŠ¡ä¸šåŠ¡å±‚çš„è§£å†³æ–¹æ¡ˆæœ¬è´¨æ˜¯åœ¨æ€§èƒ½ã€éš”ç¦»æ€§ã€ä¸šåŠ¡ä¾µå…¥æ€§ç­‰åšå–èˆã€‚</p><h2 id="faq">FAQ</h2><h3 id="q1éš”ç¦»æ€§å¹¶å‘æ§åˆ¶åˆ†ç±»">Q1ï¼šéš”ç¦»æ€§å¹¶å‘æ§åˆ¶åˆ†ç±»</h3><p>è¯¦è§ï¼šhttps://www.zhihu.com/question/60278698</p><h3 id="q2ä¸€è‡´æ€§æ¨¡å‹çº¿æ€§ä¸€è‡´æ€§å’Œé¡ºåºä¸€è‡´æ€§çš„åŒºåˆ«">Q2ï¼šä¸€è‡´æ€§æ¨¡å‹çº¿æ€§ä¸€è‡´æ€§å’Œé¡ºåºä¸€è‡´æ€§çš„åŒºåˆ«ï¼Ÿ</h3><p><img src="http://localhost:4000/images/linearizability-5-6979706.png" alt="image" /></p><p>è¯¦è§ï¼š<a href="https://int64.me/2020/%E4%B8%80%E8%87%B4%E6%80%A7%E6%A8%A1%E5%9E%8B%E7%AC%94%E8%AE%B0.html">ä¸€è‡´æ€§æ¨¡å‹ç¬”è®°</a></p><h3 id="q3raftç›¸å…³">Q3ï¼šRaftç›¸å…³</h3><ul><li>Raft åè®®Leaderæ˜¯å¦ä¸€å®šæœ‰æœ€æ–°çš„æ•°æ®ï¼Ÿ<ul><li>æ˜¯ï¼ŒLeader Completeness</li></ul></li><li>Raftåè®®åˆ¤å®šä¸€ä¸ªå€¼committedæ˜¯å¦ä¸€å®šè¦ç­‰follower ackï¼Ÿ<ul><li>å¦ï¼ŒEntry committed if known to be stored on majority of serversï¼Œä½†æ˜¯æ­£å¸¸æµç¨‹æ˜¯ç­‰è¿‡åŠæ•°node ackåç”±Machine State committedï¼Œ</li></ul></li></ul><p>è¯¦è§ä¸‹æ¬¡æŠ€æœ¯æ¢è®¨</p><h2 id="å‚è€ƒæ–‡æ¡£">å‚è€ƒæ–‡æ¡£</h2><p><a href="https://plainchant.gitbook.io/plainchant/shu-ju-xing-ying-yong-xi-tong-she-ji/mysql/shen-ru-li-jie-shi-wu">æ·±å…¥ç†è§£äº‹åŠ¡</a></p><p><a href="https://microservices.io/patterns/data/saga.html">Pattern Saga</a></p><p><a href="https://jepsen.io/consistency">consistency</a></p><p><a href="https://ericfu.me/timestamp-in-distributed-trans/">åˆ†å¸ƒå¼äº‹åŠ¡ä¸­çš„æ—¶é—´æˆ³</a></p><p><a href="https://marsishandsome.github.io/2019/06/Multi_Version_Concurrency_Control">Multi Version Concurrency Control</a></p></article><div class="share"><div class="share-component" data-disabled='qq,douban,qzone,linkedin'></div></div><div class="comment"><div id="gitalk-container"></div><link rel="stylesheet" href="http://localhost:4000/assets/vendor/gitalk/gitalk.css"> <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script> <script> var gitalk = new Gitalk({ id: '/2021/06/19/1.3-Talk-About-Distribute-Transaction/', clientID: 'Ov23li6FmCJDmAIlZmNK', clientSecret: '81bd012195b582aa2cabb7d2d472dd173353beef', repo: 'blog-comments', owner: 'HeroesZheng', admin: ['HeroesZheng'], labels: ['gitment'], perPage: 50, }); gitalk.render('gitalk-container'); </script></div></div><div class="column one-fourth"><h3 class="post-directory-title mobile-hidden">Table of Contents</h3><div id="post-directory-module" class="mobile-hidden"><section class="post-directory"><dl></dl></section></div><script src="http://localhost:4000/assets/js/jquery.toc.js"></script></div></div></section><footer class="container"><div class="site-footer" role="contentinfo"><div class="copyright left mobile-block"> Â© 2015 <span title="DempeZheng">DempeZheng</span> <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a></div><ul class="site-footer-links right mobile-hidden"><li> <a href="javascript:window.scrollTo(0,0)" >TOP</a></li></ul><a href="" target="_blank" aria-label="view source code"> <span class="mega-octicon octicon-mark-github" title="GitHub"></span> </a><ul class="site-footer-links mobile-hidden"><li> <a href="http://localhost:4000/" title="ğŸ“°é¦–é¡µ" target="">ğŸ“°é¦–é¡µ</a></li><li> <a href="http://localhost:4000/categories/" title="åˆ†ç±»" target="">åˆ†ç±»</a></li><li> <a href="http://localhost:4000/wiki/" title="ç»´åŸº" target="">ç»´åŸº</a></li><li> <a href="http://localhost:4000/links/" title="é“¾æ¥" target="">é“¾æ¥</a></li><li> <a href="http://localhost:4000/about/" title="å…³äº" target="">å…³äº</a></li><li><a href="http://localhost:4000/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></li></ul></div></footer><div class="tools-wrapper"> <a class="gotop" href="#" title="å›åˆ°é¡¶éƒ¨"><span class="octicon octicon-arrow-up"></span></a></div><script src="http://localhost:4000/assets/vendor/share.js/dist/js/share.min.js"></script> <script src="http://localhost:4000/assets/js/geopattern.js"></script> <script> jQuery(document).ready(function($) { $('.geopattern').each(function(){ $(this).geopattern($(this).data('pattern-id')); }); /* hljs.initHighlightingOnLoad(); */ }); </script></body></html>
